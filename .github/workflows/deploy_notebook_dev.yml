name: Deploy Notebook to Dev Environment
# A github action to deploy a notebook to a specific environment
# uses the template/deploy_notebook_to_env.yml file

env:
  ENVIRONMENT: dev
  NOTEBOOK_PATH: '@"REPO_NOTEBOOKS"."PUBLIC"."NOTEBOOKS"/branches/dev/Notebooks/DemoCount/Notebook1.ipynb'
  NOTEBOOK_NAME: notebook_cicd
on:
  push:
    branches:
      - dev      

jobs:
   set_env_vars:
      # Get the values from env: and set them as environment variables  
      runs-on: ubuntu-latest
      steps:
        - name: Set Environment Variables
          run: echo "ENVIRONMENT=${{ env.ENVIRONMENT }}" >> $GITHUB_ENV
        - name: Set Environment Variables
          run: echo "NOTEBOOK_PATH=${{ env.NOTEBOOK_PATH }}" >> $GITHUB_ENV
        - name: Set Environment Variables
          run: echo "NOTEBOOK_NAME=${{ env.NOTEBOOK_NAME }}" >> $GITHUB_ENV
        - name: Show Environment Variables
          run: echo $ENVIRONMENT
        - name: Show Environment Variables
          run: echo $NOTEBOOK_PATH
        - name: Show Environment Variables
          run: echo $NOTEBOOK_NAME
    deploy-notebook:      # This will have a s  deploy-notebook:    uses: ./.github/workflows/temp_deploy_notebook_to_env.yml:    with:      environment: dev      notebook_path: '@"REPO_NOTEBOOKS"."PUBLIC"."NOTEBOOKS"/branches/dev/Notebooks/DemoCount/Notebook1.ipynb'      notebook_name: dev_from_snowcicd     secrets: inherit
      uses: ./.github/workflows/temp_deploy_notebook_to_env.yml
      with:
        environment: $ENVIRONMENT
        notebook_path: $NOTEBOOK_PATH  
        notebook_name:  $NOTEBOOK_NAME
      secrets: inherit